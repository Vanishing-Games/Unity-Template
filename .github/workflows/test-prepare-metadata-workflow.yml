name: ğŸ§ª æµ‹è¯• - é¢„å¤„ç†å…ƒæ•°æ®å·¥ä½œæµ

on:
  workflow_dispatch:
    inputs:
      unityVersion:
        description: "è¦æµ‹è¯•çš„ Unity ç‰ˆæœ¬"
        required: false
        default: "auto"
        type: string
      projectName:
        description: "å¯é€‰é¡¹ç›®åç§°"
        required: false
      buildVersion:
        description: "å¯é€‰åŸºç¡€ç‰ˆæœ¬ï¼ˆå¦‚ v1.2.3ï¼‰ï¼Œç”¨äºå‘å¸ƒå€™é€‰"
        required: false
      buildType:
        description: "æ„å»ºç±»å‹"
        required: false
        type: choice
        options:
          - preview
          - release_candidate
          - release
        default: preview
      skipTests:
        description: "æ˜¯å¦è·³è¿‡æµ‹è¯•"
        required: true
        default: "false"
        type: choice
        options:
          - 'true'
          - 'false'
      deployTargets:
        description: "éƒ¨ç½²ç›®æ ‡çš„ JSON æ•°ç»„ï¼ˆå¦‚ [\"itch.io\",\"s3\"]ï¼‰"
        required: true
        default: '["steam", "gh-pages"]'

permissions:
  contents: read
  pull-requests: write

jobs:
  prepare-metadata:
    name: â³ é¢„å¤„ç†å…ƒæ•°æ®
    uses: ./.github/workflows/prepare-metadata.yml
    with:
      unityVersion: ${{ inputs.unityVersion }}
      projectName: ${{ inputs.projectName }}
      skipTests: ${{ inputs.skipTests }}
      deployTargets: ${{ inputs.deployTargets }}
      buildType: ${{ inputs.buildType }}
      buildVersion: ${{ inputs.buildVersion }}