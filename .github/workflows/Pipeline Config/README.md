# ğŸš€ CI/CD æµæ°´çº¿é…ç½®æ–‡æ¡£

è¿™ä¸ªæ–‡ä»¶å¤¹åŒ…å«äº†ç»Ÿä¸€ç®¡ç†çš„CI/CDæµæ°´çº¿é…ç½®ï¼Œæ‰€æœ‰çš„è®¾ç½®éƒ½é›†ä¸­åœ¨è¿™é‡Œï¼Œæ–¹ä¾¿ç»´æŠ¤å’Œç†è§£ã€‚

## ğŸ“ é…ç½®æ–‡ä»¶è¯´æ˜

### `pipeline-settings.json`
**ä¸»é…ç½®æ–‡ä»¶** - åŒ…å«å®Œæ•´çš„æµæ°´çº¿è®¾ç½®å’Œé€‰é¡¹è¯´æ˜

è¿™æ˜¯å”¯ä¸€çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ä»¥ä¸‹æ‰€æœ‰è®¾ç½®ï¼š

#### ğŸ¯ é¡¹ç›®ä¿¡æ¯ (`project`)
- `name`: é¡¹ç›®åç§°
- `displayName`: é¡¹ç›®æ˜¾ç¤ºåç§°  
- `unityVersion`: Unityç‰ˆæœ¬
- `description`: é¡¹ç›®æè¿°

#### ğŸ”„ è§¦å‘æ¡ä»¶ (`triggers`)
- `branches`: ä¸åŒåˆ†æ”¯çš„è§¦å‘è§„åˆ™å’Œæ„å»ºç±»å‹
- `skipKeywords`: PRæ ‡é¢˜æˆ–commitä¸­çš„è·³è¿‡å…³é”®å­—

#### ğŸ”§ ä½œä¸šé…ç½® (`jobs`)
æ¯ä¸ªä½œä¸šåŒ…å«ï¼š
- `name`: ä½œä¸šæ˜¾ç¤ºåç§°
- `description`: ä½œä¸šåŠŸèƒ½æè¿°  
- `timeout`: è¶…æ—¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
- `failureAction`: å¤±è´¥å¤„ç†æ–¹å¼ï¼ˆ`stop_pipeline` æˆ– `warn_only`ï¼‰
- `settings`: å…·ä½“é…ç½®é€‰é¡¹

#### ğŸ”‘ å¿…éœ€é…ç½® (`requirements`)
- `secrets.required`: å¿…éœ€çš„GitHub Secrets
- `secrets.optional`: å¯é€‰çš„GitHub Secrets

#### ğŸ“¢ é€šçŸ¥è®¾ç½® (`notifications`)
- æµæ°´çº¿æ‰§è¡Œç»“æœçš„é€šçŸ¥é…ç½®

## ğŸ›ï¸ ä½œä¸šç±»å‹è¯´æ˜

### 1. å•å…ƒæµ‹è¯• (`unit_tests`)
- **åŠŸèƒ½**: è¿è¡ŒUnity EditModeå’ŒPlayModeæµ‹è¯•
- **å¤±è´¥å¤„ç†**: ç»ˆæ­¢æµæ°´çº¿ 
- **é…ç½®é¡¹**:
  - `testPaths`: æµ‹è¯•æ–‡ä»¶è·¯å¾„
  - `generateCoverage`: æ˜¯å¦ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
  - `quietMode`: é™é»˜æ¨¡å¼

### 2. æ„å»ºæµ‹è¯• (`build_tests`)  
- **åŠŸèƒ½**: æ„å»ºWindowså’ŒmacOSç‰ˆæœ¬
- **å¤±è´¥å¤„ç†**: ä»…è­¦å‘Šï¼Œä¸ç»ˆæ­¢æµæ°´çº¿
- **é…ç½®é¡¹**:
  - `platforms`: æ„å»ºå¹³å°åˆ—è¡¨
  - `retentionDays`: æ„å»ºäº§ç‰©ä¿ç•™å¤©æ•°

### 3. ä»£ç é£æ ¼æ£€æµ‹ (`code_style`)
- **åŠŸèƒ½**: ä½¿ç”¨roslynatoræ£€æŸ¥ä»£ç æ ¼å¼
- **å¤±è´¥å¤„ç†**: ç»ˆæ­¢æµæ°´çº¿
- **é…ç½®é¡¹**:
  - `autoFix`: æ˜¯å¦è‡ªåŠ¨ä¿®å¤æ ¼å¼é—®é¢˜
  - `checkPaths`: æ£€æŸ¥çš„è·¯å¾„
  - `excludePaths`: æ’é™¤çš„è·¯å¾„

### 4. éƒ¨ç½²Pages (`deploy_pages`)
- **åŠŸèƒ½**: éƒ¨ç½²æ„å»ºäº§ç‰©åˆ°GitHub Pages  
- **å¤±è´¥å¤„ç†**: ä»…è­¦å‘Š
- **é…ç½®é¡¹**:
  - `artifactNamePattern`: äº§ç‰©å‘½åæ¨¡å¼
  - `branchRequirement`: åˆ†æ”¯è¦æ±‚

## ğŸ”€ è§¦å‘æµç¨‹

### Releaseåˆ†æ”¯æµç¨‹
```mermaid
flowchart LR
    A[release/** åˆ†æ”¯] --> B[æµç¨‹é¢„æµ‹]
    B --> C[ä»£ç æ£€æµ‹] 
    C --> D[å•å…ƒæµ‹è¯•]
    D --> E[æ„å»ºæµ‹è¯•]
    E --> F[éƒ¨ç½²Pages]
    F --> G[æ‰§è¡Œè¯¦æƒ…]
```

### PRéªŒè¯æµç¨‹  
```mermaid
flowchart LR
    A[develop/main PR] --> B[æµç¨‹é¢„æµ‹]
    B --> C[ä»£ç æ£€æµ‹]
    C --> D[å•å…ƒæµ‹è¯•] 
    D --> E[æ‰§è¡Œè¯¦æƒ…]
```

### å®šæ—¶æ„å»ºæµç¨‹
```mermaid
flowchart LR
    A[å‘¨æ—¥19:00] --> B[æµç¨‹é¢„æµ‹]
    B --> C[æ„å»ºæµ‹è¯•]
    C --> D[æ‰§è¡Œè¯¦æƒ…]
```

## ğŸ› ï¸ ä¿®æ”¹é…ç½®

### æ·»åŠ æ–°çš„æ„å»ºå¹³å°
åœ¨ `jobs.build_tests.settings.platforms` ä¸­æ·»åŠ ï¼š
```json
{
  "name": "Linux 64ä½",
  "buildTarget": "StandaloneLinux64", 
  "os": "ubuntu-latest"
}
```

### ä¿®æ”¹è¶…æ—¶æ—¶é—´
åœ¨å¯¹åº”ä½œä¸šçš„ `timeout` å­—æ®µä¿®æ”¹ï¼ˆå•ä½ï¼šåˆ†é’Ÿï¼‰

### æ·»åŠ æ–°çš„è·³è¿‡å…³é”®å­—
åœ¨ `triggers.skipKeywords.keywords` ä¸­æ·»åŠ ï¼š
```json
{
  "keyword": "[SKIP XXX]",
  "action": "skip_xxx",
  "description": "è·³è¿‡XXXæ­¥éª¤"
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é…ç½®éªŒè¯**: ä¿®æ”¹é…ç½®åå»ºè®®å…ˆåœ¨æµ‹è¯•åˆ†æ”¯éªŒè¯
2. **åˆ†æ”¯è§„åˆ™**: ç¡®ä¿åˆ†æ”¯åç§°æ¨¡å¼æ­£ç¡®åŒ¹é…
3. **å¯†é’¥é…ç½®**: åœ¨GitHubä»“åº“è®¾ç½®ä¸­é…ç½®å¿…éœ€çš„Secrets
4. **æ ¼å¼æ£€æŸ¥**: ä¿æŒJSONæ ¼å¼æ­£ç¡®ï¼Œå¯ä½¿ç”¨åœ¨çº¿JSONéªŒè¯å·¥å…·

## ğŸ“š ç›¸å…³é“¾æ¥

- [GitHub Actions å®˜æ–¹æ–‡æ¡£](https://docs.github.com/en/actions)
- [Unity GameCI æ–‡æ¡£](https://game.ci/)
- [é¡¹ç›®CI/CDæµç¨‹è®¾è®¡](../CICDæµç¨‹è®¾è®¡.md)
